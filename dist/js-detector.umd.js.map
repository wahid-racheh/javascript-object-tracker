{"version":3,"file":"js-detector.umd.js","sources":["../libs/canvas-resize/canvas-resize.js","../libs/src/FileSaver.js","../polyfills/requestanimationframe.js","../polyfills/usermedia.js","../src/constants.ts","../src/cv.ts","../src/utils.ts","../src/detector.ts"],"sourcesContent":["/*\n * MIT License\n *  You may use this code as long as you retain this notice.  Use at your own risk! :)\n *  https://github.com/danschumann/limby-resize\n *  0.0.8\n */\n(function() {\n  return (function(_module, namespace) {\n    _module[namespace] = function(original, canvas, callback) {\n      var w1 = original.width,\n        h1 = original.height,\n        w2 = canvas.width,\n        h2 = canvas.height,\n        img = original.getContext('2d').getImageData(0, 0, w1, h1),\n        img2 = canvas.getContext('2d').getImageData(0, 0, w2, h2);\n\n      if (w2 > w1 || h2 > h1) {\n        canvas.getContext('2d').drawImage(original, 0, 0, w2, h2);\n        return callback();\n      }\n\n      var data = img.data;\n      // it's an _ because we don't use it much, as working with doubles isn't great\n      var _data2 = img2.data;\n      // Instead, we enforce float type for every entity in the array\n      // this prevents weird faded lines when things get rounded off\n      var data2 = Array(_data2.length);\n      for (var i = 0; i < _data2.length; i++) {\n        data2[i] = 0.0;\n      }\n\n      // We track alphas, since we need to use alphas to correct colors later on\n      var alphas = Array(_data2.length >> 2);\n      for (var i = 0; i < _data2.length >> 2; i++) {\n        alphas[i] = 1;\n      }\n\n      // this will always be between 0 and 1\n      var xScale = w2 / w1;\n      var yScale = h2 / h1;\n\n      var deferred;\n\n      // We process 1 row at a time ( and then let the process rest for 0ms [async] )\n      var nextY = function(y1) {\n        for (var x1 = 0; x1 < w1; x1++) {\n          var // the original pixel is split between two pixels in the output, we do an extra step\n            extraX = false,\n            extraY = false,\n            // the output pixel\n            targetX = Math.floor(x1 * xScale),\n            targetY = Math.floor(y1 * yScale),\n            // The percentage of this pixel going to the output pixel (this gets modified)\n            xFactor = xScale,\n            yFactor = yScale,\n            // The percentage of this pixel going to the right neighbor or bottom neighbor\n            bottomFactor = 0,\n            rightFactor = 0,\n            // positions of pixels in the array\n            offset = (y1 * w1 + x1) * 4,\n            alphaOffset = 0,\n            targetOffset = (targetY * w2 + targetX) * 4;\n\n          // Right side goes into another pixel\n          if (targetX < Math.floor((x1 + 1) * xScale)) {\n            rightFactor = ((x1 + 1) * xScale) % 1;\n            xFactor -= rightFactor;\n\n            extraX = true;\n          }\n\n          // Bottom side goes into another pixel\n          if (targetY < Math.floor((y1 + 1) * yScale)) {\n            bottomFactor = ((y1 + 1) * yScale) % 1;\n            yFactor -= bottomFactor;\n\n            extraY = true;\n          }\n\n          var a;\n\n          a = data[offset + 3] / 255;\n\n          alphaOffset = targetOffset / 4;\n\n          if (extraX) {\n            // Since we're not adding the color of invisible pixels,  we multiply by a\n            data2[targetOffset + 4] += data[offset] * rightFactor * yFactor * a;\n            data2[targetOffset + 5] += data[offset + 1] * rightFactor * yFactor * a;\n            data2[targetOffset + 6] += data[offset + 2] * rightFactor * yFactor * a;\n\n            data2[targetOffset + 7] += data[offset + 3] * rightFactor * yFactor;\n\n            // if we left out the color of invisible pixels(fully or partly)\n            // the entire average we end up with will no longer be out of 255\n            // so we subtract the percentage from the alpha ( originally 1 )\n            // so that we can reverse this effect by dividing by the amount.\n            // ( if one pixel is black and invisible, and the other is white and visible,\n            // the white pixel will weight itself at 50% because it does not know the other pixel is invisible\n            // so the total(color) for the new pixel would be 128(gray), but it should be all white.\n            // the alpha will be the correct 128, combinging alphas, but we need to preserve the color\n            // of the visible pixels )\n            alphas[alphaOffset + 1] -= (1 - a) * rightFactor * yFactor;\n          }\n\n          if (extraY) {\n            data2[targetOffset + w2 * 4] += data[offset] * xFactor * bottomFactor * a;\n            data2[targetOffset + w2 * 4 + 1] += data[offset + 1] * xFactor * bottomFactor * a;\n            data2[targetOffset + w2 * 4 + 2] += data[offset + 2] * xFactor * bottomFactor * a;\n\n            data2[targetOffset + w2 * 4 + 3] += data[offset + 3] * xFactor * bottomFactor;\n\n            alphas[alphaOffset + w2] -= (1 - a) * xFactor * bottomFactor;\n          }\n\n          if (extraX && extraY) {\n            data2[targetOffset + w2 * 4 + 4] += data[offset] * rightFactor * bottomFactor * a;\n            data2[targetOffset + w2 * 4 + 5] += data[offset + 1] * rightFactor * bottomFactor * a;\n            data2[targetOffset + w2 * 4 + 6] += data[offset + 2] * rightFactor * bottomFactor * a;\n\n            data2[targetOffset + w2 * 4 + 7] += data[offset + 3] * rightFactor * bottomFactor;\n\n            alphas[alphaOffset + w2 + 1] -= (1 - a) * rightFactor * bottomFactor;\n          }\n\n          data2[targetOffset] += data[offset] * xFactor * yFactor * a;\n          data2[targetOffset + 1] += data[offset + 1] * xFactor * yFactor * a;\n          data2[targetOffset + 2] += data[offset + 2] * xFactor * yFactor * a;\n\n          data2[targetOffset + 3] += data[offset + 3] * xFactor * yFactor;\n\n          alphas[alphaOffset] -= (1 - a) * xFactor * yFactor;\n        }\n\n        if (y1++ < h1) {\n          // Big images shouldn't block for a long time.\n          // This breaks up the process and allows other processes to tick\n          setTimeout(function() {\n            nextY(y1);\n          }, 0);\n        } else done();\n      };\n\n      var done = function() {\n        // fully distribute the color of pixels that are partially full because their neighbor is transparent\n        // (i.e. undo the invisible pixels are averaged with visible ones)\n        for (var i = 0; i < _data2.length >> 2; i++) {\n          if (alphas[i] && alphas[i] < 1) {\n            data2[i << 2] /= alphas[i]; // r\n            data2[(i << 2) + 1] /= alphas[i]; // g\n            data2[(i << 2) + 2] /= alphas[i]; // b\n          }\n        }\n\n        // re populate the actual imgData\n        for (var i = 0; i < data2.length; i++) {\n          _data2[i] = Math.round(data2[i]);\n        }\n\n        var context = canvas.getContext('2d');\n        context.putImageData(img2, 0, 0);\n        callback();\n      };\n\n      // Start processing the image at row 0\n      nextY(0);\n    };\n  })(window, 'canvasResize');\n})();\n","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile)\n  : 'download' in HTMLAnchorElement.prototype\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari)) && typeof FileReader === 'object') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","(function() {\n  return (function(_module, _requestAnimationFrame, _cancelAnimationFrame) {\n    var lastTime = new Date().getTime(),\n      startTime = lastTime,\n      vendors = ['ms', 'moz', 'webkit', 'o'];\n    _module[_requestAnimationFrame] = _module.requestAnimationFrame;\n    _module[_cancelAnimationFrame] = _module.cancelAnimationFrame;\n    for (var x = 0; x < vendors.length && !_module[_requestAnimationFrame]; ++x) {\n      _module[_requestAnimationFrame] = _module[vendors[x] + 'RequestAnimationFrame'];\n      _module[_cancelAnimationFrame] =\n        _module[vendors[x] + 'CancelAnimationFrame'] ||\n        _module[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n    if (!_module[_requestAnimationFrame]) {\n      _module[_requestAnimationFrame] = function(callback, element) {\n        var currTime = new Date().getTime();\n        var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n        var elapsed = currTime - startTime;\n        var id = _module.setTimeout(function() {\n          callback(elapsed + timeToCall);\n        }, timeToCall);\n        lastTime = currTime + timeToCall;\n        return id;\n      };\n    }\n    if (!_module[_cancelAnimationFrame]) {\n      _module[_cancelAnimationFrame] = function(id) {\n        clearTimeout(id);\n      };\n    }\n  })(window, 'requestAnimationFrame', 'cancelAnimationFrame');\n})();\n","(function() {\n  return (function(_module, _enumerateDevices, _getUserMedia) {\n    (_module[_enumerateDevices] = function() {\n      if (!_module.navigator.mediaDevices || !_module.navigator.mediaDevices.enumerateDevices) {\n        return new Promise(function(resolve, reject) {\n          reject(new Error('mediaDevices not available.'));\n        });\n      }\n      return _module.navigator.mediaDevices.enumerateDevices();\n    }),\n      (_module[_getUserMedia] = function(options) {\n        if (_module.navigator.mediaDevices === undefined) {\n          _module.navigator.mediaDevices = {};\n        }\n\n        // Some browsers partially implement mediaDevices. We can't just assign an object\n        // with getUserMedia as it would overwrite existing properties.\n        // Here, we will just add the getUserMedia property if it's missing.\n        if (_module.navigator.mediaDevices.getUserMedia === undefined) {\n          _module.navigator.mediaDevices.getUserMedia = function(constraints) {\n            // First get ahold of the legacy getUserMedia, if present\n            var getUserMedia =\n              _module.navigator.getUserMedia ||\n              _module.navigator.mozGetUserMedia ||\n              _module.navigator.webkitGetUserMedia ||\n              _module.navigator.msGetUserMedia;\n\n            // Some browsers just don't implement it - return a rejected promise with an error\n            // to keep a consistent interface\n            if (!getUserMedia) {\n              return new Promise(function(resolve, reject) {\n                reject(new Error('WebRTC not available.'));\n              });\n            }\n\n            // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n            return new Promise(function(resolve, reject) {\n              getUserMedia.call(_module.navigator, constraints, resolve, reject);\n            });\n          };\n        }\n\n        return _module.navigator.mediaDevices.getUserMedia(options);\n      });\n  })(window, 'enumerateDevices', 'getUserMedia');\n})();\n","export const stackBoxBlurMult: number[] = [\n  1,\n  171,\n  205,\n  293,\n  57,\n  373,\n  79,\n  137,\n  241,\n  27,\n  391,\n  357,\n  41,\n  19,\n  283,\n  265\n];\n\nexport const stackBoxBlurShift: number[] = [\n  0,\n  9,\n  10,\n  11,\n  9,\n  12,\n  10,\n  11,\n  12,\n  9,\n  13,\n  13,\n  10,\n  9,\n  13,\n  13\n];\n\nexport const neighborhood: any[] = [\n  [1, 0],\n  [1, -1],\n  [0, -1],\n  [-1, -1],\n  [-1, 0],\n  [-1, 1],\n  [0, 1],\n  [1, 1]\n];\n","/*\nCopyright (c) 2011 Juan Mellado\nUpdated by `Racheh Wahid` (2019)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the 'Software'), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\nReferences:\n- 'OpenCV: Open Computer Vision Library'\n  http://sourceforge.net/projects/opencvlibrary/\n- 'Stack Blur: Fast But Goodlooking'\n  http://incubator.quasimondo.com/processing/fast_blur_deluxe.php\n*/\n\nimport { ICoordinate, IImage, IBlurStack, IPoint, IRect } from './interfaces';\nimport { stackBoxBlurMult, stackBoxBlurShift, neighborhood } from './constants';\n\nexport const blurStack = (): IBlurStack => {\n  return {\n    color: 0,\n    next: null\n  };\n};\n\nexport const getImage = (image?: IImage): IImage => {\n  return image\n    ? {\n        width: image.width || 0,\n        height: image.height || 0,\n        data: image.data || []\n      }\n    : {\n        width: 0,\n        height: 0,\n        data: []\n      };\n};\n\nexport const grayscaleOld = (imageSrc: IImage, imageDst: IImage): IImage => {\n  let src: any[] = imageSrc.data,\n    dst: any[] = imageDst.data,\n    len: number = src.length,\n    i: number = 0,\n    j: number = 0;\n\n  for (; i < len; i += 4) {\n    dst[j++] = (src[i] * 0.299 + src[i + 1] * 0.587 + src[i + 2] * 0.114 + 0.5) & 0xff;\n  }\n\n  imageDst.width = imageSrc.width;\n  imageDst.height = imageSrc.height;\n\n  return imageDst;\n};\n\nexport const grayscale = (imageSrc: IImage, imageDst: IImage): IImage => {\n  let src: any[] = imageSrc.data,\n    dst: any[] = imageDst.data;\n  let len: number = src.length | 0,\n    srcLength_16: number = (len - 16) | 0;\n\n  let i: number = 0,\n    j: number = 0;\n  let coeff_r: number = 0.6,\n    coeff_g: number = 0.9,\n    coeff_b: number = 0.2;\n  //let coeff_r: number = 0.299, coeff_g: number = 0.587, coeff_b: number = 0.114;\n  //let coeff_r: number = 4899, coeff_g: number = 9617, coeff_b: number = 1868;\n\n  for (i = 0; i <= srcLength_16; i += 16, j += 4) {\n    dst[j] = (src[i] * coeff_r + src[i + 1] * coeff_g + src[i + 2] * coeff_b + 8192) & 0xff;\n    dst[j + 1] = (src[i + 4] * coeff_r + src[i + 5] * coeff_g + src[i + 6] * coeff_b + 8192) & 0xff;\n    dst[j + 2] =\n      (src[i + 8] * coeff_r + src[i + 9] * coeff_g + src[i + 10] * coeff_b + 8192) & 0xff;\n    dst[j + 3] =\n      (src[i + 12] * coeff_r + src[i + 13] * coeff_g + src[i + 14] * coeff_b + 8192) & 0xff;\n  }\n\n  for (i = 0; i < len; i += 4) {\n    dst[j++] = (src[i] * coeff_r + src[i + 1] * coeff_g + src[i + 2] * coeff_b + 0.5) & 0xff;\n  }\n\n  imageDst.width = imageSrc.width;\n  imageDst.height = imageSrc.height;\n\n  return imageDst;\n};\n\nexport const threshold = (imageSrc: IImage, imageDst: IImage, threshold: number): IImage => {\n  let src: any[] = imageSrc.data,\n    dst: any[] = imageDst.data,\n    len: number = src.length,\n    tab: any[] = [],\n    i: number;\n\n  for (i = 0; i < 256; ++i) {\n    tab[i] = i <= threshold ? 0 : 255;\n  }\n\n  for (i = 0; i < len; ++i) {\n    dst[i] = tab[src[i]];\n  }\n\n  imageDst.width = imageSrc.width;\n  imageDst.height = imageSrc.height;\n\n  return imageDst;\n};\n\nexport const stackBoxBlur = (imageSrc: IImage, imageDst: IImage, kernelSize: number): IImage => {\n  let src: any[] = imageSrc.data,\n    dst: any[] = imageDst.data,\n    height: number = imageSrc.height,\n    width: number = imageSrc.width,\n    heightMinus1: number = height - 1,\n    widthMinus1: number = width - 1,\n    size: number = kernelSize + kernelSize + 1,\n    radius: number = kernelSize + 1,\n    mult: number = stackBoxBlurMult[kernelSize],\n    shift: number = stackBoxBlurShift[kernelSize],\n    stack: IBlurStack,\n    stackStart: IBlurStack,\n    color: number,\n    sum: number,\n    pos: number,\n    start: number,\n    p: number,\n    x: number,\n    y: number,\n    i: number;\n\n  stack = stackStart = blurStack();\n  for (i = 1; i < size; ++i) {\n    stack = stack.next = blurStack();\n  }\n  stack.next = stackStart;\n\n  pos = 0;\n\n  for (y = 0; y < height; ++y) {\n    start = pos;\n\n    color = src[pos];\n    sum = radius * color;\n\n    stack = stackStart;\n    for (i = 0; i < radius; ++i) {\n      stack.color = color;\n      stack = stack.next;\n    }\n    for (i = 1; i < radius; ++i) {\n      stack.color = src[pos + i];\n      sum += stack.color;\n      stack = stack.next;\n    }\n\n    stack = stackStart;\n    for (x = 0; x < width; ++x) {\n      dst[pos++] = (sum * mult) >>> shift;\n\n      p = x + radius;\n      p = start + (p < widthMinus1 ? p : widthMinus1);\n      sum -= stack.color - src[p];\n\n      stack.color = src[p];\n      stack = stack.next;\n    }\n  }\n\n  for (x = 0; x < width; ++x) {\n    pos = x;\n    start = pos + width;\n\n    color = dst[pos];\n    sum = radius * color;\n\n    stack = stackStart;\n    for (i = 0; i < radius; ++i) {\n      stack.color = color;\n      stack = stack.next;\n    }\n    for (i = 1; i < radius; ++i) {\n      stack.color = dst[start];\n      sum += stack.color;\n      stack = stack.next;\n\n      start += width;\n    }\n\n    stack = stackStart;\n    for (y = 0; y < height; ++y) {\n      dst[pos] = (sum * mult) >>> shift;\n\n      p = y + radius;\n      p = x + (p < heightMinus1 ? p : heightMinus1) * width;\n      sum -= stack.color - dst[p];\n\n      stack.color = dst[p];\n      stack = stack.next;\n\n      pos += width;\n    }\n  }\n\n  return imageDst;\n};\n\nexport const adaptiveThreshold = (\n  imageSrc: IImage,\n  imageDst: IImage,\n  kernelSize: number,\n  threshold: number\n): IImage => {\n  let src: any[] = imageSrc.data,\n    dst: any[] = imageDst.data,\n    len: number = src.length,\n    tab: any[] = [],\n    i: number;\n\n  stackBoxBlur(imageSrc, imageDst, kernelSize);\n\n  for (i = 0; i < 768; ++i) {\n    tab[i] = i - 255 <= -threshold ? 255 : 0;\n  }\n\n  for (i = 0; i < len; ++i) {\n    dst[i] = tab[src[i] - dst[i] + 255];\n  }\n\n  imageDst.width = imageSrc.width;\n  imageDst.height = imageSrc.height;\n\n  return imageDst;\n};\n\nexport const otsu = (imageSrc: IImage): number => {\n  let src: any[] = imageSrc.data,\n    len: number = src.length,\n    hist: any[] = [],\n    threshold: number = 0,\n    sum: number = 0,\n    sumB: number = 0,\n    wB: number = 0,\n    wF: number = 0,\n    max: number = 0,\n    mu: number,\n    between: number,\n    i: number;\n\n  for (i = 0; i < 256; ++i) {\n    hist[i] = 0;\n  }\n\n  for (i = 0; i < len; ++i) {\n    hist[src[i]]++;\n  }\n\n  for (i = 0; i < 256; ++i) {\n    sum += hist[i] * i;\n  }\n\n  for (i = 0; i < 256; ++i) {\n    wB += hist[i];\n    if (0 !== wB) {\n      wF = len - wB;\n      if (0 === wF) {\n        break;\n      }\n\n      sumB += hist[i] * i;\n\n      mu = sumB / wB - (sum - sumB) / wF;\n\n      between = wB * wF * mu * mu;\n\n      if (between > max) {\n        max = between;\n        threshold = i;\n      }\n    }\n  }\n\n  return threshold;\n};\n\nexport const gaussianKernel = (kernelSize: number): any[] => {\n  let tab: any[] = [\n      [1],\n      [0.25, 0.5, 0.25],\n      [0.0625, 0.25, 0.375, 0.25, 0.0625],\n      [0.03125, 0.109375, 0.21875, 0.28125, 0.21875, 0.109375, 0.03125]\n    ],\n    kernel: any[] = [],\n    center: number,\n    sigma: number,\n    scale2X: number,\n    sum: number,\n    x: number,\n    i: number;\n\n  if (kernelSize <= 7 && kernelSize % 2 === 1) {\n    kernel = tab[kernelSize >> 1];\n  } else {\n    center = (kernelSize - 1.0) * 0.5;\n    sigma = 0.8 + 0.3 * (center - 1.0);\n    scale2X = -0.5 / (sigma * sigma);\n    sum = 0.0;\n    for (i = 0; i < kernelSize; ++i) {\n      x = i - center;\n      sum += kernel[i] = Math.exp(scale2X * x * x);\n    }\n    sum = 1 / sum;\n    for (i = 0; i < kernelSize; ++i) {\n      kernel[i] *= sum;\n    }\n  }\n\n  return kernel;\n};\n\nexport const gaussianBlurFilter = (\n  imageSrc: IImage,\n  imageDst: IImage,\n  kernel: any[],\n  horizontal: boolean\n): IImage => {\n  let src: any[] = imageSrc.data,\n    dst: any[] = imageDst.data,\n    height: number = imageSrc.height,\n    width: number = imageSrc.width,\n    pos: number = 0,\n    limit: number = kernel.length >> 1,\n    cur: number,\n    value: number,\n    i: number,\n    j: number,\n    k: number;\n\n  for (i = 0; i < height; ++i) {\n    for (j = 0; j < width; ++j) {\n      value = 0.0;\n\n      for (k = -limit; k <= limit; ++k) {\n        if (horizontal) {\n          cur = pos + k;\n          if (j + k < 0) {\n            cur = pos;\n          } else if (j + k >= width) {\n            cur = pos;\n          }\n        } else {\n          cur = pos + k * width;\n          if (i + k < 0) {\n            cur = pos;\n          } else if (i + k >= height) {\n            cur = pos;\n          }\n        }\n\n        value += kernel[limit + k] * src[cur];\n      }\n\n      dst[pos++] = horizontal ? value : (value + 0.5) & 0xff;\n    }\n  }\n\n  return imageDst;\n};\n\nexport const gaussianBlur = (\n  imageSrc: IImage,\n  imageDst: IImage,\n  imageMean: IImage,\n  kernelSize: number\n): IImage => {\n  let kernel = gaussianKernel(kernelSize);\n\n  imageDst.width = imageSrc.width;\n  imageDst.height = imageSrc.height;\n\n  imageMean.width = imageSrc.width;\n  imageMean.height = imageSrc.height;\n\n  gaussianBlurFilter(imageSrc, imageMean, kernel, true);\n  gaussianBlurFilter(imageMean, imageDst, kernel, false);\n\n  return imageDst;\n};\n\nexport const binaryBorder = (imageSrc: IImage, dst: any[]): any[] => {\n  let src: any[] = imageSrc.data,\n    height: number = imageSrc.height,\n    width: number = imageSrc.width,\n    posSrc: number = 0,\n    posDst: number = 0,\n    i: number,\n    j: number;\n\n  for (j = -2; j < width; ++j) {\n    dst[posDst++] = 0;\n  }\n\n  for (i = 0; i < height; ++i) {\n    dst[posDst++] = 0;\n\n    for (j = 0; j < width; ++j) {\n      dst[posDst++] = 0 === src[posSrc++] ? 0 : 1;\n    }\n\n    dst[posDst++] = 0;\n  }\n\n  for (j = -2; j < width; ++j) {\n    dst[posDst++] = 0;\n  }\n\n  return dst;\n};\n\nexport const neighborhoodDeltas = (width: number): any[] => {\n  let deltas: any[] = [],\n    len: number = neighborhood.length,\n    i: number = 0;\n\n  for (; i < len; ++i) {\n    deltas[i] = neighborhood[i][0] + neighborhood[i][1] * width;\n  }\n\n  return deltas.concat(deltas);\n};\n\nexport const borderFollowing = (\n  src: any[],\n  pos: number,\n  nbd: number,\n  point: any,\n  hole: boolean,\n  deltas: any[]\n) => {\n  let contour: any[] = [],\n    pos1: number,\n    pos3: number,\n    pos4: number,\n    s: any,\n    s_end: any,\n    s_prev: any;\n\n  //contour.hole = hole;\n\n  s = s_end = hole ? 0 : 4;\n  do {\n    s = (s - 1) & 7;\n    pos1 = pos + deltas[s];\n    if (src[pos1] !== 0) {\n      break;\n    }\n  } while (s !== s_end);\n\n  if (s === s_end) {\n    src[pos] = -nbd;\n    contour.push({ x: point.x, y: point.y });\n  } else {\n    pos3 = pos;\n    s_prev = s ^ 4;\n\n    while (true) {\n      s_end = s;\n\n      do {\n        pos4 = pos3 + deltas[++s];\n      } while (src[pos4] === 0);\n\n      s &= 7;\n\n      if ((s - 1) >>> 0 < s_end >>> 0) {\n        src[pos3] = -nbd;\n      } else if (src[pos3] === 1) {\n        src[pos3] = nbd;\n      }\n\n      contour.push({ x: point.x, y: point.y });\n\n      s_prev = s;\n\n      point.x += neighborhood[s][0];\n      point.y += neighborhood[s][1];\n\n      if (pos4 === pos && pos3 === pos1) {\n        break;\n      }\n\n      pos3 = pos4;\n      s = (s + 4) & 7;\n    }\n  }\n\n  return contour;\n};\n\nexport const findContours = (imageSrc: IImage, binary: any[]) => {\n  let width: number = imageSrc.width,\n    height: number = imageSrc.height,\n    contours: any[] = [],\n    src: any[],\n    deltas: any[],\n    pos: number,\n    pix: any,\n    nbd: number,\n    outer: boolean,\n    hole: boolean,\n    i: number,\n    j: number;\n\n  src = binaryBorder(imageSrc, binary);\n\n  deltas = neighborhoodDeltas(width + 2);\n\n  pos = width + 3;\n  nbd = 1;\n\n  for (i = 0; i < height; ++i, pos += 2) {\n    for (j = 0; j < width; ++j, ++pos) {\n      pix = src[pos];\n\n      if (0 !== pix) {\n        outer = hole = false;\n\n        if (1 === pix && 0 === src[pos - 1]) {\n          outer = true;\n        } else if (pix >= 1 && 0 === src[pos + 1]) {\n          hole = true;\n        }\n\n        if (outer || hole) {\n          ++nbd;\n\n          contours.push(borderFollowing(src, pos, nbd, { x: j, y: i }, hole, deltas));\n        }\n      }\n    }\n  }\n\n  return contours;\n};\n\nexport const approxPolyDP = (contour: any, epsilon: number) => {\n  let slice: any = { start_index: 0, end_index: 0 },\n    right_slice: any = { start_index: 0, end_index: 0 },\n    poly: any[] = [],\n    stack: any[] = [],\n    len: number = contour.length,\n    pt: IPoint,\n    start_pt: IPoint = { x: 0, y: 0 },\n    end_pt: IPoint = { x: 0, y: 0 },\n    dist: number,\n    max_dist: number = 0,\n    le_eps: boolean,\n    dx: number,\n    dy: number,\n    i: number,\n    j: number,\n    k: number;\n\n  epsilon *= epsilon;\n\n  k = 0;\n\n  for (i = 0; i < 3; ++i) {\n    max_dist = 0;\n\n    k = (k + right_slice.start_index) % len;\n    start_pt = contour[k];\n    if (++k === len) {\n      k = 0;\n    }\n\n    for (j = 1; j < len; ++j) {\n      pt = contour[k];\n      if (++k === len) {\n        k = 0;\n      }\n\n      dx = pt.x - start_pt.x;\n      dy = pt.y - start_pt.y;\n      dist = dx * dx + dy * dy;\n\n      if (dist > max_dist) {\n        max_dist = dist;\n        right_slice.start_index = j;\n      }\n    }\n  }\n\n  if (max_dist <= epsilon) {\n    poly.push({ x: start_pt.x, y: start_pt.y });\n  } else {\n    slice.start_index = k;\n    slice.end_index = right_slice.start_index += slice.start_index;\n\n    right_slice.start_index -= right_slice.start_index >= len ? len : 0;\n    right_slice.end_index = slice.start_index;\n    if (right_slice.end_index < right_slice.start_index) {\n      right_slice.end_index += len;\n    }\n\n    stack.push({\n      start_index: right_slice.start_index,\n      end_index: right_slice.end_index\n    });\n    stack.push({\n      start_index: slice.start_index,\n      end_index: slice.end_index\n    });\n  }\n\n  while (stack.length !== 0) {\n    slice = stack.pop();\n\n    end_pt = contour[slice.end_index % len];\n    start_pt = contour[(k = slice.start_index % len)];\n    if (++k === len) {\n      k = 0;\n    }\n\n    if (slice.end_index <= slice.start_index + 1) {\n      le_eps = true;\n    } else {\n      max_dist = 0;\n\n      dx = end_pt.x - start_pt.x;\n      dy = end_pt.y - start_pt.y;\n\n      for (i = slice.start_index + 1; i < slice.end_index; ++i) {\n        pt = contour[k];\n        if (++k === len) {\n          k = 0;\n        }\n\n        dist = Math.abs((pt.y - start_pt.y) * dx - (pt.x - start_pt.x) * dy);\n\n        if (dist > max_dist) {\n          max_dist = dist;\n          right_slice.start_index = i;\n        }\n      }\n\n      le_eps = max_dist * max_dist <= epsilon * (dx * dx + dy * dy);\n    }\n\n    if (le_eps) {\n      poly.push({ x: start_pt.x, y: start_pt.y });\n    } else {\n      right_slice.end_index = slice.end_index;\n      slice.end_index = right_slice.start_index;\n\n      stack.push({\n        start_index: right_slice.start_index,\n        end_index: right_slice.end_index\n      });\n      stack.push({\n        start_index: slice.start_index,\n        end_index: slice.end_index\n      });\n    }\n  }\n\n  return poly;\n};\n\nexport const isContourConvex = (contour: any) => {\n  let orientation: number = 0,\n    convex: boolean = true,\n    len: number = contour.length,\n    i: number = 0,\n    j: number = 0,\n    cur_pt: IPoint,\n    prev_pt: IPoint,\n    dxdy0: number,\n    dydx0: number,\n    dx0: number,\n    dy0: number,\n    dx: number,\n    dy: number;\n\n  prev_pt = contour[len - 1];\n  cur_pt = contour[0];\n\n  dx0 = cur_pt.x - prev_pt.x;\n  dy0 = cur_pt.y - prev_pt.y;\n\n  for (; i < len; ++i) {\n    if (++j === len) {\n      j = 0;\n    }\n\n    prev_pt = cur_pt;\n    cur_pt = contour[j];\n\n    dx = cur_pt.x - prev_pt.x;\n    dy = cur_pt.y - prev_pt.y;\n    dxdy0 = dx * dy0;\n    dydx0 = dy * dx0;\n\n    orientation |= dydx0 > dxdy0 ? 1 : dydx0 < dxdy0 ? 2 : 3;\n\n    if (3 === orientation) {\n      convex = false;\n      break;\n    }\n\n    dx0 = dx;\n    dy0 = dy;\n  }\n\n  return convex;\n};\n\nexport const getRectSize = (\n  x: number,\n  y: number,\n  tl: IPoint,\n  tr: IPoint,\n  bl: IPoint,\n  br: IPoint\n): IRect => {\n  // Calculate the max width/height\n  let wb: number = Math.hypot(br.x - bl.x, br.y - bl.y);\n  let wt: number = Math.hypot(tr.x - tl.x, tr.y - tl.y);\n  let w: number = wb > wt ? wb : wt;\n  let hr: number = Math.hypot(tr.x - br.x, tr.y - br.y);\n  let hl: number = Math.hypot(tl.x - bl.x, tr.y - bl.y);\n  let h: number = hr > hl ? hr : hl;\n\n  return {\n    width: w,\n    height: h,\n    x: x,\n    y: y,\n    tl: tl,\n    tr: tr,\n    bl: bl,\n    br: br\n  };\n};\n\nexport const findCornersPosition = (contour: any): IRect => {\n  const cornerArray = [contour[3], contour[0], contour[2], contour[1]];\n  //Determine left/right based on x position of top and bottom 2\n  const tl = cornerArray[0].x < cornerArray[1].x ? cornerArray[0] : cornerArray[1];\n  const tr = cornerArray[0].x > cornerArray[1].x ? cornerArray[0] : cornerArray[1];\n  const bl = cornerArray[2].x < cornerArray[3].x ? cornerArray[2] : cornerArray[3];\n  const br = cornerArray[2].x > cornerArray[3].x ? cornerArray[2] : cornerArray[3];\n\n  return getRectSize(cornerArray[0].x, cornerArray[0].y, tl, tr, bl, br);\n};\n\nexport const minEdgeLength = (poly: any): number => {\n  let len: number = poly.length,\n    i: number = 0,\n    j: number = len - 1,\n    min: any = Infinity,\n    d: number,\n    dx: number,\n    dy: number;\n\n  for (; i < len; j = i++) {\n    dx = poly[i].x - poly[j].x;\n    dy = poly[i].y - poly[j].y;\n\n    d = dx * dx + dy * dy;\n\n    if (d < min) {\n      min = d;\n    }\n  }\n\n  return Math.sqrt(min);\n};\n\nexport const findCandidates = (\n  contours: any[],\n  minSize: number,\n  epsilon: number,\n  minLength: number,\n  minLimit: number\n) => {\n  let candidates: any[] = [],\n    len: number = contours.length,\n    contour: any,\n    poly: any,\n    i: number;\n\n  for (i = 0; i < len; ++i) {\n    contour = contours[i];\n\n    if (contour.length >= minSize) {\n      poly = approxPolyDP(contour, contour.length * epsilon);\n\n      if (poly.length === 4 && isContourConvex(poly)) {\n        poly.point = findCornersPosition(poly);\n\n        const min = minEdgeLength(poly);\n\n        poly.hasValidEdgeLength = min >= minLimit;\n\n        if (min >= minLength) {\n          candidates.push(poly);\n        }\n      }\n    }\n  }\n\n  return candidates;\n};\n\nexport const detectContour = (image: IImage, ceil: number) => {\n  let grey: IImage = getImage();\n  let thres: IImage = getImage();\n  let binary: any[] = [];\n\n  grayscale(image, grey);\n  adaptiveThreshold(grey, thres, 2, 1);\n\n  let contours: any = findContours(thres, binary);\n\n  let size: number = image.width < image.height ? image.width : image.height;\n  let candidates: any = findCandidates(\n    contours,\n    image.width * 0.2,\n    0.05,\n    100,\n    size - (ceil * 2 + 20)\n  );\n\n  return candidates;\n};\n\nexport const square2quad = (src: IPoint[]) => {\n  let sq: any[] = [],\n    px: number,\n    py: number,\n    dx1: number,\n    dx2: number,\n    dy1: number,\n    dy2: number,\n    den: number;\n\n  px = src[0].x - src[1].x + src[2].x - src[3].x;\n  py = src[0].y - src[1].y + src[2].y - src[3].y;\n\n  if (0 === px && 0 === py) {\n    sq[0] = src[1].x - src[0].x;\n    sq[1] = src[2].x - src[1].x;\n    sq[2] = src[0].x;\n    sq[3] = src[1].y - src[0].y;\n    sq[4] = src[2].y - src[1].y;\n    sq[5] = src[0].y;\n    sq[6] = 0;\n    sq[7] = 0;\n    sq[8] = 1;\n  } else {\n    dx1 = src[1].x - src[2].x;\n    dx2 = src[3].x - src[2].x;\n    dy1 = src[1].y - src[2].y;\n    dy2 = src[3].y - src[2].y;\n    den = dx1 * dy2 - dx2 * dy1;\n\n    sq[6] = (px * dy2 - dx2 * py) / den;\n    sq[7] = (dx1 * py - px * dy1) / den;\n    sq[8] = 1;\n    sq[0] = src[1].x - src[0].x + sq[6] * src[1].x;\n    sq[1] = src[3].x - src[0].x + sq[7] * src[3].x;\n    sq[2] = src[0].x;\n    sq[3] = src[1].y - src[0].y + sq[6] * src[1].y;\n    sq[4] = src[3].y - src[0].y + sq[7] * src[3].y;\n    sq[5] = src[0].y;\n  }\n\n  return sq;\n};\n\nexport const getPerspectiveTransform = (src: IPoint[], size: number) => {\n  let rq: any = square2quad(src);\n\n  rq[0] /= size;\n  rq[1] /= size;\n  rq[3] /= size;\n  rq[4] /= size;\n  rq[6] /= size;\n  rq[7] /= size;\n\n  return rq;\n};\n\nexport const warp = (\n  imageSrc: IImage,\n  imageDst: IImage,\n  contour: any,\n  warpSize: number\n): IImage => {\n  let src: any[] = imageSrc.data,\n    dst: any[] = imageDst.data,\n    width: number = imageSrc.width,\n    height: number = imageSrc.height,\n    pos: number = 0,\n    sx1: number,\n    sx2: number,\n    dx1: number,\n    dx2: number,\n    sy1: number,\n    sy2: number,\n    dy1: number,\n    dy2: number,\n    p1: number,\n    p2: number,\n    p3: number,\n    p4: number,\n    m: any,\n    r: number,\n    s: number,\n    t: number,\n    u: number,\n    v: number,\n    w: number,\n    x: number,\n    y: number,\n    i: number,\n    j: number;\n\n  m = getPerspectiveTransform(contour, warpSize - 1);\n\n  r = m[8];\n  s = m[2];\n  t = m[5];\n\n  for (i = 0; i < warpSize; ++i) {\n    r += m[7];\n    s += m[1];\n    t += m[4];\n\n    u = r;\n    v = s;\n    w = t;\n\n    for (j = 0; j < warpSize; ++j) {\n      u += m[6];\n      v += m[0];\n      w += m[3];\n\n      x = v / u;\n      y = w / u;\n\n      sx1 = x >>> 0;\n      sx2 = sx1 === width - 1 ? sx1 : sx1 + 1;\n      dx1 = x - sx1;\n      dx2 = 1.0 - dx1;\n\n      sy1 = y >>> 0;\n      sy2 = sy1 === height - 1 ? sy1 : sy1 + 1;\n      dy1 = y - sy1;\n      dy2 = 1.0 - dy1;\n\n      p1 = p2 = sy1 * width;\n      p3 = p4 = sy2 * width;\n\n      dst[pos++] =\n        (dy2 * (dx2 * src[p1 + sx1] + dx1 * src[p2 + sx2]) +\n          dy1 * (dx2 * src[p3 + sx1] + dx1 * src[p4 + sx2])) &\n        0xff;\n    }\n  }\n\n  imageDst.width = warpSize;\n  imageDst.height = warpSize;\n\n  return imageDst;\n};\n\nexport const perimeter = (poly: any): number => {\n  let len: number = poly.length,\n    i: number = 0,\n    j: number = len - 1,\n    p: number = 0.0,\n    dx: number,\n    dy: number;\n\n  for (; i < len; j = i++) {\n    dx = poly[i].x - poly[j].x;\n    dy = poly[i].y - poly[j].y;\n\n    p += Math.sqrt(dx * dx + dy * dy);\n  }\n\n  return p;\n};\n\nexport const countNonZero = (imageSrc: IImage, square: IPoint): number => {\n  let src: any = imageSrc.data,\n    height: number = square.height || 0,\n    width: number = square.width || 0,\n    pos: number = square.x + square.y * imageSrc.width,\n    span: number = imageSrc.width - width,\n    nz: number = 0,\n    i: number,\n    j: number;\n\n  for (i = 0; i < height; ++i) {\n    for (j = 0; j < width; ++j) {\n      if (0 !== src[pos++]) {\n        ++nz;\n      }\n    }\n\n    pos += span;\n  }\n\n  return nz;\n};\n\nexport const isValidPoint = (p1: IRect, p2: IRect, ceil: number): boolean => {\n  const isValidTlx = p1.tl.x >= p2.tl.x - ceil;\n  const isValidTly = p1.tl.y >= p2.tl.y - ceil;\n\n  const isValidTrx = p1.tr.x <= p2.tr.x + ceil;\n  const isValidTry = p1.tr.y >= p2.tr.y - ceil;\n\n  const isValidBlx = p1.bl.x >= p2.bl.x - ceil;\n  const isValidBly = p1.bl.y <= p2.bl.y + ceil;\n\n  const isValidBrx = p1.br.x <= p2.br.x + ceil;\n  const isValidBry = p1.br.y <= p2.br.y + ceil;\n\n  const isValidTx = p1.tl.x <= p2.tl.x + ceil;\n  const isValidBx = p1.br.x >= p2.br.x - ceil;\n\n  const isValidTy = p1.tl.y <= p2.tl.y + ceil;\n  const isValidBy = p1.br.y >= p2.br.y - ceil;\n\n  return (\n    isValidTlx &&\n    isValidTly &&\n    isValidTrx &&\n    isValidTry &&\n    isValidBlx &&\n    isValidBly &&\n    isValidBrx &&\n    isValidBry &&\n    ((isValidTx && isValidBx) || (isValidTy && isValidBy))\n  );\n};\n\nexport const diff = (num1: number, num2: number): number => {\n  if (num1 > num2) {\n    return num1 - num2;\n  } else {\n    return num2 - num1;\n  }\n};\n\nexport const distance = (x1: number, x2: number, y1: number, y2: number): number => {\n  var deltaX = diff(x1, x2);\n  var deltaY = diff(y1, y2);\n  var dist = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n  return dist;\n};\n\nexport const getRectCoordinates = (\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius?: any\n): IRect => {\n  if (typeof radius === 'undefined') {\n    radius = 1;\n  }\n  if (typeof radius === 'number') {\n    radius = { tl: radius, tr: radius, br: radius, bl: radius };\n  } else {\n    let defaultRadius: any = { tl: 0, tr: 0, br: 0, bl: 0 };\n    let keys = Object.keys(defaultRadius);\n    for (let i = 0; i < keys.length; i++) {\n      let side = keys[i];\n      radius[side] = radius[side] || defaultRadius[side];\n    }\n  }\n\n  return {\n    tr: {\n      x: x + width - radius.tr,\n      y: y,\n      qct: { cpx: x + width, cpy: y, x: x + width, y: y + radius.tr }\n    },\n    br: {\n      x: x + width,\n      y: y + height - radius.br,\n      qct: {\n        cpx: x + width,\n        cpy: y + height,\n        x: x + width - radius.br,\n        y: y + height\n      }\n    },\n    bl: {\n      x: x + radius.bl,\n      y: y + height,\n      qct: { cpx: x, cpy: y + height, x: x, y: y + height - radius.bl }\n    },\n    tl: {\n      x: x,\n      y: y + radius.tl,\n      qct: { cpx: x, cpy: y, x: x + radius.tl, y: y }\n    },\n    x: x,\n    y: y,\n    radius: radius\n  };\n};\n\n// Draw rectangle : draw 4 lines\nexport const drawRect = (\n  ctx: any,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  lineWidth: number,\n  color: string,\n  radius?: any,\n  fill?: any,\n  stroke?: boolean\n) => {\n  if (typeof stroke === 'undefined') {\n    stroke = true;\n  }\n\n  let rectCoordinate: IRect = getRectCoordinates(x, y, width, height, radius);\n  // Draw lines\n  ctx.beginPath();\n  ctx.lineWidth = lineWidth;\n  ctx.strokeStyle = color;\n  ctx.moveTo(rectCoordinate.x + rectCoordinate.radius.tl, rectCoordinate.y);\n  ctx.lineTo(rectCoordinate.tr.x, rectCoordinate.tr.y);\n  if (rectCoordinate.tr.qct) {\n    ctx.quadraticCurveTo(\n      rectCoordinate.tr.qct.cpx,\n      rectCoordinate.tr.qct.cpy,\n      rectCoordinate.tr.qct.x,\n      rectCoordinate.tr.qct.y\n    );\n  }\n  ctx.lineTo(rectCoordinate.br.x, rectCoordinate.br.y);\n  if (rectCoordinate.br.qct) {\n    ctx.quadraticCurveTo(\n      rectCoordinate.br.qct.cpx,\n      rectCoordinate.br.qct.cpy,\n      rectCoordinate.br.qct.x,\n      rectCoordinate.br.qct.y\n    );\n  }\n  ctx.lineTo(rectCoordinate.bl.x, rectCoordinate.bl.y);\n  if (rectCoordinate.bl.qct) {\n    ctx.quadraticCurveTo(\n      rectCoordinate.bl.qct.cpx,\n      rectCoordinate.bl.qct.cpy,\n      rectCoordinate.bl.qct.x,\n      rectCoordinate.bl.qct.y\n    );\n  }\n  ctx.lineTo(rectCoordinate.tl.x, rectCoordinate.tl.y);\n  if (rectCoordinate.tl.qct) {\n    ctx.quadraticCurveTo(\n      rectCoordinate.tl.qct.cpx,\n      rectCoordinate.tl.qct.cpy,\n      rectCoordinate.tl.qct.x,\n      rectCoordinate.tl.qct.y\n    );\n  }\n  ctx.closePath();\n\n  if (fill) {\n    ctx.fill();\n  }\n  if (stroke) {\n    ctx.stroke();\n  }\n};\n\n// Get outside rectangles area coordinates\nexport const getOutsideRectCoordinates = (\n  ceil: number,\n  contextWidth: number,\n  rectTopLeftX: number,\n  rectTopLeftY: number,\n  rectTopRightX: number,\n  rectTopRightY: number,\n  rectBottomLeftY: number,\n  rectWidth: number,\n  rectHeight: number\n): ICoordinate => {\n  let rectRadius: ICoordinate = {\n    top: { x: 0, y: 0, width: 0, height: 0 },\n    left: { x: 0, y: 0, width: 0, height: 0 },\n    right: { x: 0, y: 0, width: 0, height: 0 },\n    bottom: { x: 0, y: 0, width: 0, height: 0 }\n  };\n\n  // Top area\n  rectRadius.top.width = contextWidth;\n  rectRadius.top.height = rectTopLeftY - 1;\n\n  // Bottom area\n  rectRadius.bottom.y = rectBottomLeftY;\n  rectRadius.bottom.width = contextWidth;\n  rectRadius.bottom.height = rectBottomLeftY - 0.1;\n\n  // Left area\n  rectRadius.left.y = rectTopLeftY - 1;\n  rectRadius.left.width = rectTopLeftX;\n  rectRadius.left.height = rectHeight;\n\n  // Right area\n  rectRadius.right.x = rectTopRightX;\n  rectRadius.right.y = rectTopRightY;\n  rectRadius.right.width = contextWidth - (rectTopLeftX + rectWidth);\n  rectRadius.right.height = rectHeight;\n\n  return rectRadius;\n};\n\n// Draw outside rectangles\nexport const clipRect = (ctx: any, coordinates: ICoordinate, color: any) => {\n  ctx.beginPath();\n  ctx.fillStyle = color;\n\n  // Top area\n  ctx.fillRect(coordinates.top.x, coordinates.top.y, coordinates.top.width, coordinates.top.height);\n\n  // Bottom side\n  ctx.fillRect(\n    coordinates.bottom.x,\n    coordinates.bottom.y,\n    coordinates.bottom.width,\n    coordinates.bottom.height\n  );\n\n  // Left area\n  ctx.fillRect(\n    coordinates.left.x,\n    coordinates.left.y,\n    coordinates.left.width,\n    coordinates.left.height\n  );\n\n  // Right area\n  ctx.fillRect(\n    coordinates.right.x,\n    coordinates.right.y,\n    coordinates.right.width,\n    coordinates.right.height\n  );\n\n  ctx.fill();\n  ctx.closePath();\n};\n\nexport const getColor = (imageData: any, x: number, y: number, width: number): string => {\n  const index = (x + y * width) * 4;\n  const r = imageData.data[index + 0];\n  const g = imageData.data[index + 1];\n  const b = imageData.data[index + 2];\n  const a = imageData.data[index + 3];\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n};\n\nexport const cropImage = (ctx: any, x: number, y: number, w: number, h: number, scale?: number) => {\n  // Original size\n  /*\n  let canvas = document.createElement('canvas');\n  canvas.width = w;\n  canvas.height = h;\n  let context = canvas.getContext('2d');\n  context.rect(0, 0, w, h);\n  context.fillStyle = 'white';\n  context.fill();\n  context.putImageData(ctx.getImageData(x, y, w, h), 0, 0);\n  return canvas.toDataURL(fileExtension);\n  */\n\n  // With scale\n  let i, j, it, jt;\n  scale = scale || 1;\n  let canvas = document.createElement('canvas');\n  canvas.width = w * scale;\n  canvas.height = h * scale;\n  let context = canvas.getContext('2d');\n  if (context) {\n    let sourceData = ctx.getImageData(x, y, w, h);\n    context.beginPath();\n    for (i = 0; i < w; i++) {\n      it = i * scale;\n      for (j = 0; j < h; j++) {\n        jt = j * scale;\n        let color = getColor(sourceData, i, j, w);\n        context.fillStyle = color;\n        context.fillRect(it, jt, scale, scale);\n      }\n    }\n  }\n  return canvas;\n};\n","declare var window: any;\n\n// return a promise that resolves with a File instance\n// Usage example:\n// base64toFile('data:text/plain;base64,aGVsbG8gd29ybGQ=', 'hello.txt', 'text/plain').then(function(file){console.log(file);});\nexport const base64toFile = (url: string, filename: string, mimeType: string) => {\n  return fetch(url)\n    .then(res => {\n      return res.arrayBuffer();\n    })\n    .then(buf => {\n      return new File([buf], filename, { type: mimeType });\n    });\n};\n\nexport const getBlobFromImageData = (image_data: string) => {\n  let blob: any;\n\n  const parsedImageData = atob(image_data.split(',')[1]);\n\n  // Use typed arrays to convert the binary data to a Blob\n  let arraybuffer = new ArrayBuffer(parsedImageData.length);\n  let view = new Uint8Array(arraybuffer);\n\n  for (let i = 0; i < parsedImageData.length; i++) {\n    view[i] = parsedImageData.charCodeAt(i) & 0xff;\n  }\n\n  try {\n    // This is the recommended method:\n    blob = new Blob([arraybuffer], {\n      type: 'application/octet-stream'\n    });\n  } catch (e) {\n    // The BlobBuilder API has been deprecated in favour of Blob, but older\n    // browsers don't know about the Blob constructor\n    // IE10 also supports BlobBuilder, but since the `Blob` constructor\n    //  also works, there's no need to add `MSBlobBuilder`.\n    let bb = new (window.WebKitBlobBuilder || window.MozBlobBuilder)();\n    bb.append(arraybuffer);\n    blob = bb.getBlob('application/octet-stream'); // <-- Here's the Blob\n  }\n\n  return blob;\n};\n","declare var window: any;\ndeclare var canvasResize: any;\ndeclare var saveAs: any;\n\nimport {\n  getRectCoordinates,\n  getOutsideRectCoordinates,\n  clipRect,\n  drawRect,\n  detectContour,\n  isValidPoint,\n  cropImage\n} from './cv';\nimport { IRatio, IVideoInput, IDetector } from './interfaces';\n\nimport { getBlobFromImageData, base64toFile } from './utils';\n\nexport default class Detector {\n  private ceil: number;\n  private width: number;\n  private height: number;\n  private lineWidth: number;\n  private dpi: number;\n\n  private rectBorderDefaultColor: string;\n  private rectBorderColorSuccess: string;\n  private rectBorderColorError: string;\n  private outsideBackgroundColor: string;\n\n  private drawContour = false;\n  private isImageCaptured = false;\n\n  private mimeType: string;\n  private imageExtension: string;\n\n  private originalCanvas: any;\n  private cropContainer: any;\n  private outsideRectCoordinates: any;\n  private imageData: any;\n  private strokeColor: string;\n\n  private currentStream: any;\n  private videoInputList: Array<IVideoInput>;\n  private raf: any;\n\n  private roundRectX: number;\n  private roundRectY: number;\n  private roundRectWidth: number;\n  private roundRectHeight: number;\n\n  private ratio: IRatio;\n  private formattedRatio: IRatio;\n\n  constructor(options: IDetector) {\n    this.ceil = options.ceil || 50;\n    this.width = options.width || 400;\n    this.height = options.height || 600;\n    this.lineWidth = options.lineWidth || 5;\n    this.dpi = options.dpi || 300;\n\n    this.rectBorderDefaultColor = options.rectBorderDefaultColor || 'white';\n    this.rectBorderColorSuccess = options.rectBorderColorSuccess || 'green';\n    this.rectBorderColorError = options.rectBorderColorError || 'red';\n    this.outsideBackgroundColor = options.outsideBackgroundColor || 'rgba(0, 0, 0, 0.3)';\n\n    this.drawContour = options.drawContour || false;\n    this.isImageCaptured = false;\n\n    this.mimeType = options.mimeType || 'image/png';\n    this.imageExtension = options.imageExtension || 'png';\n\n    this.originalCanvas = null;\n    this.cropContainer = null;\n    this.outsideRectCoordinates = null;\n    this.imageData = null;\n    this.strokeColor = this.rectBorderDefaultColor;\n\n    this.currentStream = undefined;\n    this.videoInputList = [];\n    this.raf = null;\n\n    this.roundRectX = this.ceil;\n    this.roundRectY = this.ceil;\n    this.roundRectWidth = this.width - this.ceil * 2;\n    this.roundRectHeight = this.height - this.ceil * 3;\n\n    this.ratio = options.ratio || { w: 210, h: 297 }; // A4 by default\n    this.formattedRatio = this.ratio;\n  }\n\n  initRectRatio(ratio: number, w: number, h: number, ceil: number) {\n    let obj: any = {};\n    let canvasRatio: number = w / h;\n    const assign = (mainProp: string, dependentProp: string, r: number, canvasProp: number) => {\n      if (w <= h) {\n        obj[mainProp] = canvasProp - ceil * 2;\n        obj[dependentProp] = obj[mainProp] * r;\n      } else {\n        obj[dependentProp] = canvasProp - ceil * 2;\n        obj[mainProp] = obj[dependentProp] * r;\n      }\n    };\n    if (w === h || canvasRatio > 1) {\n      assign('h', 'w', 1 / ratio, h);\n    } else if (canvasRatio < ratio) {\n      assign('h', 'w', ratio, h);\n    } else {\n      assign('w', 'h', 1 / ratio, w);\n    }\n    obj.x = (w - obj.w) / 2;\n    obj.y = (h - obj.h) / 2;\n    return obj;\n  }\n\n  // Init rectangle coordinates\n  initRectCoordinates() {\n    this.formattedRatio.w = this.ratio.w;\n    this.formattedRatio.h = this.ratio.h;\n    if (this.width >= this.height) {\n      this.formattedRatio.w = this.ratio.h;\n      this.formattedRatio.h = this.ratio.w;\n    }\n\n    let ratio: number = this.formattedRatio.w / this.formattedRatio.h;\n    let rectangle: any = this.initRectRatio(ratio, this.width, this.height, this.ceil);\n\n    this.roundRectX = rectangle.x;\n    this.roundRectY = rectangle.y;\n    this.roundRectWidth = rectangle.w;\n    this.roundRectHeight = rectangle.h;\n\n    // Get centered rectangle coordinates\n    this.cropContainer = getRectCoordinates(\n      this.roundRectX,\n      this.roundRectY,\n      this.roundRectWidth,\n      this.roundRectHeight\n    );\n\n    this.outsideRectCoordinates = getOutsideRectCoordinates(\n      this.ceil,\n      this.width,\n      this.cropContainer.tl.x,\n      this.cropContainer.tl.y,\n      this.cropContainer.tr.x,\n      this.cropContainer.tr.y,\n      this.cropContainer.bl.y,\n      this.roundRectWidth,\n      this.roundRectHeight\n    );\n  }\n\n  // Draw image data\n  putImageData(context: any, video: any) {\n    // Hack to center stream on mobile devices\n    let dx: number = 0;\n    let innerWidth: number = window.innerWidth;\n    if (innerWidth < 450) {\n      dx = video.width / 4;\n    }\n    // Draw video stream\n    context.drawImage(video, -dx, 0, video.width, video.height);\n\n    // Get image data\n    this.imageData = context.getImageData(0, 0, video.width, video.height);\n\n    // Clear rect\n    context.clearRect(0, 0, this.width, this.height);\n\n    // Render stream into canvas\n    context.putImageData(this.imageData, 0, 0);\n  }\n\n  drawRectangle(context: any) {\n    // Draw outside rectangle\n    if (this.outsideRectCoordinates) {\n      clipRect(context, this.outsideRectCoordinates, this.outsideBackgroundColor);\n    }\n\n    // Draw rectangle\n    drawRect(\n      context,\n      this.roundRectX,\n      this.roundRectY,\n      this.roundRectWidth,\n      this.roundRectHeight,\n      this.lineWidth,\n      this.strokeColor\n    );\n\n    // Update border color\n    if (!this.isImageCaptured) {\n      this.strokeColor = this.rectBorderDefaultColor;\n    }\n  }\n\n  // Detect object\n  detect(context: any, callback: Function) {\n    if (!this.imageData) {\n      callback();\n      return;\n    }\n\n    // Detect contours\n    var candidates: Array<any>[] = detectContour(this.imageData, this.ceil);\n\n    let self: any = this;\n    // Find object\n    self.findObject(context, candidates, 0, 0, () => {\n      let timeout: any = window.setTimeout(() => {\n        self.isImageCaptured = false;\n        window.clearTimeout(timeout);\n      }, 2000);\n      callback();\n    });\n  }\n\n  // Find object\n  findObject(context: any, contours: Array<any>[], x: number, y: number, callback: Function) {\n    let i: number = contours.length,\n      contour: any;\n    while (i--) {\n      if (!this.isImageCaptured) {\n        contour = contours[i];\n        this.strokeColor = this.rectBorderColorError;\n\n        if (contour && contour.length === 4 && this.cropContainer) {\n          contour.isValide = isValidPoint(contour.point, this.cropContainer, 5);\n\n          if (contour.point.width > 0 && contour.point.height > 0 && contour.isValide) {\n            this.strokeColor = this.rectBorderColorSuccess;\n\n            this.isImageCaptured = true;\n\n            // Object found : trigger callback\n            callback();\n          }\n\n          // Draw contour\n          if (this.drawContour) {\n            this.drawContours(context, contour, x, y);\n          }\n        }\n      }\n    }\n  }\n\n  // Draw contour\n  drawContours(context: any, contour: any, x: number, y: number) {\n    context.strokeStyle = contour.isValide ? 'blue' : 'red';\n    context.beginPath();\n    for (var j = 0; j < contour.length; ++j) {\n      var point = contour[j];\n      context.moveTo(x + point.x, y + point.y);\n      point = contour[(j + 1) % contour.length];\n      context.lineTo(x + point.x, y + point.y);\n    }\n    context.stroke();\n    context.closePath();\n  }\n\n  // Crop image\n  cropImage(context: any) {\n    this.originalCanvas = cropImage(\n      context,\n      this.roundRectX + this.lineWidth,\n      this.roundRectY + this.lineWidth,\n      this.roundRectWidth - this.lineWidth * 2,\n      this.roundRectHeight - this.lineWidth * 2\n    );\n\n    this.isImageCaptured = false;\n\n    return this.originalCanvas.toDataURL(this.mimeType);\n  }\n\n  // Resize canvas\n  resizeCanvas(callback: Function) {\n    if (!this.originalCanvas) {\n      callback(null);\n      return;\n    }\n\n    // Create canvas with dpi size (by default : 300)\n    let dpmm: number = this.dpi / 25.4; // Pixels per mm = 300 dpi / 25.4 = 11.811 dpmm\n    let pixelRatioWidth: number = Math.round(this.formattedRatio.w * dpmm); // by default (210 mm x 11.811 dpmm) : 2480 px\n    let pixelRatioHeight: number = Math.round(this.formattedRatio.h * dpmm); // by default (297 mm x 11.811 dpmm) : 3508 px\n\n    let resizedCanvas: any = document.createElement('canvas');\n    resizedCanvas.width = pixelRatioWidth;\n    resizedCanvas.height = pixelRatioHeight;\n\n    let self: any = this;\n    // Resize canvas\n    canvasResize(self.originalCanvas, resizedCanvas, () => {\n      // resized will now be a properly resized version of canvas\n      let resizedBase64Data: string = resizedCanvas.toDataURL(self.mimeType);\n      callback(resizedBase64Data);\n    });\n  }\n\n  // Download image\n  download(imageName: string, imageData: any) {\n    let blob: any = getBlobFromImageData(imageData);\n    let fileName: string = imageName + '.' + this.imageExtension;\n    saveAs(blob, fileName);\n  }\n\n  // Convert base64 to file\n  convertBase64toFile(imageName: string, base64Data: string, callback: any) {\n    let fileName: string = imageName + '.' + this.imageExtension;\n    base64toFile(base64Data, fileName, this.mimeType).then(callback);\n  }\n\n  // Get media track\n  stopMediaTracks(stream: any) {\n    stream.getTracks().forEach((track: any) => {\n      track.stop();\n    });\n  }\n\n  // Get camera devices\n  gotDevices(mediaDevices: Array<any>[]) {\n    let self: any = this;\n    let count: number = 1;\n    try {\n      self.videoInputList = [];\n      mediaDevices.forEach((mediaDevice: any) => {\n        if (mediaDevice.kind === 'videoinput') {\n          const element: IVideoInput = {\n            id: mediaDevice.deviceId,\n            label: mediaDevice.label || 'Camera' + count++\n          };\n          self.videoInputList.push(element);\n        }\n      });\n    } catch (ex) {}\n  }\n\n  // Get camera stream\n  getCamera(isDesktop: boolean, resolve: any, reject: any) {\n    if (this.currentStream) {\n      this.stopMediaTracks(this.currentStream);\n    }\n\n    var videoConstraints: any = {};\n    if (isDesktop && !!this.videoInputList.length) {\n      videoConstraints.deviceId = { exact: this.videoInputList[0].id };\n    } else {\n      videoConstraints.facingMode = 'environment';\n    }\n\n    let self: any = this;\n\n    window\n      .getUserMedia({\n        video: videoConstraints,\n        audio: false\n      })\n      .then((stream: any) => {\n        self.currentStream = stream;\n        resolve(stream);\n        return window.enumerateDevices();\n      })\n      .then(self.gotDevices)\n      .catch((err: any) => {\n        reject(err);\n      });\n\n    window.enumerateDevices().then(self.gotDevices);\n  }\n\n  // Request animation frame\n  requestAnimationFrame(tick: any) {\n    this.raf = window.requestAnimationFrame(tick);\n  }\n\n  // Cancel animation frame\n  cancelAnimationFrame() {\n    if (this.raf) {\n      window.cancelAnimationFrame(this.raf);\n    }\n  }\n}\n"],"names":["global"],"mappings":"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"}